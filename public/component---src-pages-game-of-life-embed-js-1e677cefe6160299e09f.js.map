{"version":3,"file":"component---src-pages-game-of-life-embed-js-1e677cefe6160299e09f.js","mappings":"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","sources":["webpack://personal-website-reach/./src/pages/game-of-life-embed.js"],"sourcesContent":["import React, { useState, useCallback, useRef, useEffect } from \"react\";\nimport styled, { createGlobalStyle } from \"styled-components\";\nimport { PRESETS, createEmptyGrid, placePreset, nextGeneration, countLiveCells, gridsEqual } from \"../utils/gameOfLife\";\n\nconst GlobalStyle = createGlobalStyle`\n  html, body { margin: 0; padding: 0; background: #0d0f11; overflow: hidden; }\n`;\n\nconst Wrap = styled.div`\n  display: flex; flex-direction: column; align-items: center;\n  padding: 8px; color: #fff; background: #0d0f11; height: 100vh; box-sizing: border-box;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n`;\nconst Controls = styled.div`\n  display: flex; flex-wrap: wrap; gap: 6px; justify-content: center; align-items: center;\n  margin-bottom: 6px; flex-shrink: 0;\n`;\nconst ControlGroup = styled.div`\n  display: flex; flex-direction: column; gap: 1px;\n  label { font-size: 0.55rem; color: rgba(255,255,255,0.4); text-transform: uppercase; letter-spacing: 0.05em; }\n`;\nconst Select = styled.select`\n  background: #17191b; color: #fff; border: 1px solid rgba(127,161,232,0.4);\n  border-radius: 4px; padding: 3px 6px; font-size: 0.7rem; cursor: pointer;\n`;\nconst Slider = styled.input`accent-color: #7fa1e8; width: 60px;`;\nconst Btn = styled.button`\n  background: ${p => p.$primary ? '#7fa1e8' : 'rgba(127,161,232,0.15)'};\n  color: #fff; border: 1px solid rgba(127,161,232,0.4); border-radius: 4px;\n  padding: 3px 10px; font-size: 0.7rem; cursor: pointer;\n  &:hover { background: ${p => p.$primary ? '#5b88d4' : 'rgba(127,161,232,0.3)'}; }\n`;\nconst CanvasWrap = styled.div`\n  flex: 1; display: flex; align-items: center; justify-content: center;\n  width: 100%; min-height: 0; position: relative;\n`;\nconst Stats = styled.div`\n  display: flex; gap: 14px; padding: 4px 0; font-size: 0.65rem;\n  color: rgba(255,255,255,0.5); flex-shrink: 0;\n  span { color: #7fa1e8; font-weight: bold; }\n`;\nconst Overlay = styled.div`\n  position: absolute; inset: 0; display: flex; flex-direction: column;\n  align-items: center; justify-content: center;\n  background: rgba(13,15,17,0.88); border-radius: 4px; z-index: 10;\n`;\nconst OverlayTitle = styled.h2`\n  color: #7fa1e8; margin: 0 0 8px; font-size: 1.1rem;\n`;\nconst OverlayStat = styled.div`\n  color: rgba(255,255,255,0.7); font-size: 0.75rem; margin: 2px 0;\n  span { color: #7fa1e8; font-weight: bold; }\n`;\nconst OverlayBtn = styled(Btn)`\n  margin-top: 12px; padding: 6px 16px; font-size: 0.75rem;\n`;\n\nconst GameOfLifeEmbed = () => {\n  const [gridSize, setGridSize] = useState(30);\n  const [preset, setPreset] = useState(\"random\");\n  const [speed, setSpeed] = useState(150);\n  const [running, setRunning] = useState(false);\n  const [generation, setGeneration] = useState(0);\n  const [cellSize, setCellSize] = useState(14);\n  const [gameOver, setGameOver] = useState(null); // null | { reason, generations, peakCells, finalCells, startCells }\n  const rows = gridSize, cols = gridSize;\n\n  const [grid, setGrid] = useState(() => {\n    const g = createEmptyGrid(30, 30);\n    placePreset(g, \"random\", 30, 30);\n    return g;\n  });\n\n  const canvasRef = useRef(null);\n  const wrapRef = useRef(null);\n  const speedRef = useRef(speed);\n  const drawingRef = useRef(false);\n  const drawModeRef = useRef(1);\n  const peakCellsRef = useRef(0);\n  const startCellsRef = useRef(0);\n  const prevGridRef = useRef(null);\n  speedRef.current = speed;\n\n  // Track peak\n  useEffect(() => {\n    const live = countLiveCells(grid);\n    if (live > peakCellsRef.current) peakCellsRef.current = live;\n  }, [grid]);\n\n  // Responsive cell size\n  useEffect(() => {\n    const resize = () => {\n      const wrap = wrapRef.current;\n      if (!wrap) return;\n      const w = wrap.clientWidth - 8, h = wrap.clientHeight - 8;\n      setCellSize(Math.max(4, Math.min(Math.floor(w / cols), Math.floor(h / rows))));\n    };\n    resize();\n    window.addEventListener(\"resize\", resize);\n    return () => window.removeEventListener(\"resize\", resize);\n  }, [rows, cols]);\n\n  // Draw canvas\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    const ctx = canvas.getContext(\"2d\");\n    const w = cols * cellSize, h = rows * cellSize;\n    canvas.width = w; canvas.height = h;\n    ctx.fillStyle = \"#0d0f11\"; ctx.fillRect(0, 0, w, h);\n    ctx.strokeStyle = \"rgba(127,161,232,0.06)\"; ctx.lineWidth = 0.5;\n    for (let r = 0; r <= rows; r++) { ctx.beginPath(); ctx.moveTo(0, r*cellSize); ctx.lineTo(w, r*cellSize); ctx.stroke(); }\n    for (let c = 0; c <= cols; c++) { ctx.beginPath(); ctx.moveTo(c*cellSize, 0); ctx.lineTo(c*cellSize, h); ctx.stroke(); }\n    ctx.shadowColor = \"#7fa1e8\";\n    for (let r = 0; r < rows; r++)\n      for (let c = 0; c < cols; c++)\n        if (grid[r][c]) {\n          ctx.fillStyle = \"#7fa1e8\"; ctx.shadowBlur = 3;\n          ctx.fillRect(c*cellSize+1, r*cellSize+1, cellSize-2, cellSize-2);\n        }\n    ctx.shadowBlur = 0;\n  }, [grid, rows, cols, cellSize]);\n\n  // Simulation loop with end detection\n  useEffect(() => {\n    if (!running) return;\n    const id = setInterval(() => {\n      setGrid(g => {\n        const next = nextGeneration(g, rows, cols);\n        const liveCells = countLiveCells(next);\n\n        // Extinction\n        if (liveCells === 0) {\n          setRunning(false);\n          setGameOver({\n            reason: \"Extinction ‚Äî all cells died\",\n            generations: generation + 1,\n            peakCells: peakCellsRef.current,\n            finalCells: 0,\n            startCells: startCellsRef.current,\n          });\n          return next;\n        }\n\n        // Stasis ‚Äî grid unchanged (still life or period-1 oscillator)\n        if (gridsEqual(g, next, rows, cols)) {\n          setRunning(false);\n          setGameOver({\n            reason: \"Stasis ‚Äî stable state reached\",\n            generations: generation + 1,\n            peakCells: peakCellsRef.current,\n            finalCells: liveCells,\n            startCells: startCellsRef.current,\n          });\n          return next;\n        }\n\n        // Period-2 oscillator detection\n        if (prevGridRef.current && gridsEqual(prevGridRef.current, next, rows, cols)) {\n          setRunning(false);\n          setGameOver({\n            reason: \"Oscillation ‚Äî repeating cycle detected\",\n            generations: generation + 1,\n            peakCells: peakCellsRef.current,\n            finalCells: liveCells,\n            startCells: startCellsRef.current,\n          });\n          return next;\n        }\n\n        prevGridRef.current = g;\n        setGeneration(gen => gen + 1);\n        return next;\n      });\n    }, speedRef.current);\n    return () => clearInterval(id);\n  }, [running, speed, rows, cols, generation]);\n\n  // Drawing\n  const getCellFromEvent = useCallback((e) => {\n    const canvas = canvasRef.current;\n    const rect = canvas.getBoundingClientRect();\n    const sx = canvas.width / rect.width, sy = canvas.height / rect.height;\n    const cx = e.touches ? e.touches[0].clientX : e.clientX;\n    const cy = e.touches ? e.touches[0].clientY : e.clientY;\n    const c = Math.floor((cx - rect.left) * sx / cellSize);\n    const r = Math.floor((cy - rect.top) * sy / cellSize);\n    if (r >= 0 && r < rows && c >= 0 && c < cols) return { r, c };\n    return null;\n  }, [rows, cols, cellSize]);\n\n  const toggleCell = useCallback((r, c, mode) => {\n    setGrid(prev => { const copy = prev.map(row => new Uint8Array(row)); copy[r][c] = mode; return copy; });\n  }, []);\n\n  const handlePointerDown = useCallback((e) => {\n    e.preventDefault();\n    const cell = getCellFromEvent(e);\n    if (!cell) return;\n    drawingRef.current = true;\n    drawModeRef.current = grid[cell.r][cell.c] ? 0 : 1;\n    toggleCell(cell.r, cell.c, drawModeRef.current);\n  }, [getCellFromEvent, grid, toggleCell]);\n\n  const handlePointerMove = useCallback((e) => {\n    if (!drawingRef.current) return;\n    e.preventDefault();\n    const cell = getCellFromEvent(e);\n    if (cell) toggleCell(cell.r, cell.c, drawModeRef.current);\n  }, [getCellFromEvent, toggleCell]);\n\n  const handlePointerUp = useCallback(() => { drawingRef.current = false; }, []);\n\n  useEffect(() => {\n    window.addEventListener(\"mouseup\", handlePointerUp);\n    window.addEventListener(\"touchend\", handlePointerUp);\n    return () => { window.removeEventListener(\"mouseup\", handlePointerUp); window.removeEventListener(\"touchend\", handlePointerUp); };\n  }, [handlePointerUp]);\n\n  const resetGame = (newPreset) => {\n    const p = newPreset || preset;\n    setRunning(false); setGeneration(0); setGameOver(null);\n    peakCellsRef.current = 0; prevGridRef.current = null;\n    const g = createEmptyGrid(rows, cols);\n    placePreset(g, p, rows, cols);\n    startCellsRef.current = countLiveCells(g);\n    peakCellsRef.current = startCellsRef.current;\n    setGrid(g);\n  };\n\n  const handleGridSizeChange = (s) => {\n    setGridSize(s); setRunning(false); setGeneration(0); setGameOver(null);\n    peakCellsRef.current = 0; prevGridRef.current = null;\n    const g = createEmptyGrid(s, s);\n    placePreset(g, preset, s, s);\n    startCellsRef.current = countLiveCells(g);\n    peakCellsRef.current = startCellsRef.current;\n    setGrid(g);\n  };\n\n  const handlePresetChange = (p) => { setPreset(p); resetGame(p); };\n\n  const handlePlay = () => {\n    if (!running && !gameOver) {\n      if (generation === 0) startCellsRef.current = countLiveCells(grid);\n      prevGridRef.current = null;\n    }\n    setRunning(!running);\n  };\n\n  const liveCells = countLiveCells(grid);\n\n  return (\n    <>\n      <GlobalStyle />\n      <Wrap>\n        <Controls>\n          <ControlGroup>\n            <label>Pattern</label>\n            <Select value={preset} onChange={e => handlePresetChange(e.target.value)}>\n              {Object.entries(PRESETS).map(([k, v]) => <option key={k} value={k}>{v.name}</option>)}\n            </Select>\n          </ControlGroup>\n          <ControlGroup>\n            <label>Grid {gridSize}√ó{gridSize}</label>\n            <Slider type=\"range\" min=\"10\" max=\"50\" value={gridSize} onChange={e => handleGridSizeChange(Number(e.target.value))} />\n          </ControlGroup>\n          <ControlGroup>\n            <label>Speed {speed}ms</label>\n            <Slider type=\"range\" min=\"30\" max=\"500\" step=\"10\" value={speed} onChange={e => setSpeed(Number(e.target.value))} />\n          </ControlGroup>\n          <Btn $primary onClick={handlePlay}>{running ? \"‚è∏\" : \"‚ñ∂\"}</Btn>\n          <Btn onClick={() => resetGame()}>‚Ü∫</Btn>\n          <Btn onClick={() => {\n            if (gameOver) return;\n            setGrid(g => {\n              const next = nextGeneration(g, rows, cols);\n              setGeneration(n => n+1);\n              return next;\n            });\n          }}>‚Üí</Btn>\n        </Controls>\n        <CanvasWrap ref={wrapRef}>\n          <canvas\n            ref={canvasRef}\n            onMouseDown={handlePointerDown}\n            onMouseMove={handlePointerMove}\n            onTouchStart={handlePointerDown}\n            onTouchMove={handlePointerMove}\n            style={{ cursor: \"crosshair\", display: \"block\", borderRadius: 4, touchAction: \"none\" }}\n          />\n          {gameOver && (\n            <Overlay>\n              <OverlayTitle>üèÅ Game Over</OverlayTitle>\n              <OverlayStat>{gameOver.reason}</OverlayStat>\n              <OverlayStat>Generations: <span>{gameOver.generations}</span></OverlayStat>\n              <OverlayStat>Starting cells: <span>{gameOver.startCells}</span></OverlayStat>\n              <OverlayStat>Peak cells: <span>{gameOver.peakCells}</span></OverlayStat>\n              <OverlayStat>Final cells: <span>{gameOver.finalCells}</span></OverlayStat>\n              <OverlayBtn $primary onClick={() => resetGame()}>Play Again</OverlayBtn>\n            </Overlay>\n          )}\n        </CanvasWrap>\n        <Stats>\n          <div>Gen: <span>{generation}</span></div>\n          <div>Live: <span>{liveCells}</span></div>\n        </Stats>\n      </Wrap>\n    </>\n  );\n};\n\nexport default GameOfLifeEmbed;\n"],"names":["GlobalStyle","createGlobalStyle","Wrap","styled","div","withConfig","displayName","componentId","Controls","ControlGroup","Select","select","Slider","input","Btn","button","p","$primary","CanvasWrap","Stats","Overlay","OverlayTitle","h2","OverlayStat","OverlayBtn","GameOfLifeEmbed","gridSize","setGridSize","useState","preset","setPreset","speed","setSpeed","running","setRunning","generation","setGeneration","cellSize","setCellSize","gameOver","setGameOver","rows","cols","grid","setGrid","g","createEmptyGrid","placePreset","canvasRef","useRef","wrapRef","speedRef","drawingRef","drawModeRef","peakCellsRef","startCellsRef","prevGridRef","current","useEffect","live","countLiveCells","resize","wrap","w","clientWidth","h","clientHeight","Math","max","min","floor","window","addEventListener","removeEventListener","canvas","ctx","getContext","width","height","fillStyle","fillRect","strokeStyle","lineWidth","r","beginPath","moveTo","lineTo","stroke","c","shadowColor","shadowBlur","id","setInterval","next","nextGeneration","liveCells","reason","generations","peakCells","finalCells","startCells","gridsEqual","gen","clearInterval","getCellFromEvent","useCallback","e","rect","getBoundingClientRect","sx","sy","cx","touches","clientX","cy","clientY","left","top","toggleCell","mode","prev","copy","map","row","Uint8Array","handlePointerDown","preventDefault","cell","handlePointerMove","handlePointerUp","resetGame","newPreset","React","value","onChange","handlePresetChange","target","Object","entries","PRESETS","_ref","k","v","key","name","type","s","handleGridSizeChange","Number","step","onClick","handlePlay","n","ref","onMouseDown","onMouseMove","onTouchStart","onTouchMove","style","cursor","display","borderRadius","touchAction"],"sourceRoot":""}