{"version":3,"file":"component---src-pages-game-of-life-js-eafe22e9018d7dca4bb0.js","mappings":"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","sources":["webpack://personal-website-reach/./src/pages/game-of-life.js"],"sourcesContent":["import React, { useState, useCallback, useRef, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport Layout from \"../components/layout\";\nimport { PRESETS, createEmptyGrid, placePreset, nextGeneration, countLiveCells, gridsEqual } from \"../utils/gameOfLife\";\n\nconst CELL_SIZE = 14;\n\nconst PageWrapper = styled.div`\n  display: flex; flex-direction: column; align-items: center; padding: 2% 0; color: #fff;\n`;\nconst Title = styled.h1`\n  color: #fff; margin-bottom: 0.3em; font-size: 2rem; text-align: center;\n`;\nconst Subtitle = styled.p`\n  color: rgba(255,255,255,0.6); margin-bottom: 1.5em; text-align: center; max-width: 600px; line-height: 1.5;\n`;\nconst Controls = styled.div`\n  display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; align-items: center; margin-bottom: 1.2em;\n`;\nconst ControlGroup = styled.div`\n  display: flex; flex-direction: column; gap: 2px;\n  label { font-size: 0.65rem; color: rgba(255,255,255,0.4); text-transform: uppercase; letter-spacing: 0.05em; }\n`;\nconst Select = styled.select`\n  background: #17191b; color: #fff; border: 1px solid rgba(127,161,232,0.4);\n  border-radius: 6px; padding: 6px 10px; font-size: 0.85rem; cursor: pointer;\n  &:hover { border-color: #7fa1e8; }\n`;\nconst Slider = styled.input`accent-color: #7fa1e8; width: 90px;`;\nconst Btn = styled.button`\n  background: ${p => p.$primary ? '#7fa1e8' : 'rgba(127,161,232,0.15)'};\n  color: #fff; border: 1px solid rgba(127,161,232,0.4); border-radius: 6px;\n  padding: 6px 14px; font-size: 0.85rem; cursor: pointer; transition: all 0.2s;\n  &:hover { background: ${p => p.$primary ? '#5b88d4' : 'rgba(127,161,232,0.3)'}; }\n`;\nconst CanvasWrapper = styled.div`\n  border-radius: 8px; overflow: hidden; background: #0d0f11; cursor: crosshair; max-width: 90vw;\n  box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.12), 0 1px 5px 0 rgba(0,0,0,0.2);\n  position: relative;\n`;\nconst Stats = styled.div`\n  display: flex; gap: 20px; margin-top: 1em; font-size: 0.8rem; color: rgba(255,255,255,0.5);\n  span { color: #7fa1e8; font-weight: bold; }\n`;\nconst Overlay = styled.div`\n  position: absolute; inset: 0; display: flex; flex-direction: column;\n  align-items: center; justify-content: center;\n  background: rgba(13,15,17,0.9); border-radius: 8px; z-index: 10;\n`;\nconst OverlayTitle = styled.h2`color: #7fa1e8; margin: 0 0 12px; font-size: 1.4rem;`;\nconst OverlayStat = styled.div`\n  color: rgba(255,255,255,0.7); font-size: 0.9rem; margin: 3px 0;\n  span { color: #7fa1e8; font-weight: bold; }\n`;\nconst OverlayBtn = styled(Btn)`margin-top: 16px; padding: 8px 20px;`;\n\nconst GameOfLife = () => {\n  const [gridSize, setGridSize] = useState(30);\n  const [preset, setPreset] = useState(\"random\");\n  const [speed, setSpeed] = useState(150);\n  const [running, setRunning] = useState(false);\n  const [generation, setGeneration] = useState(0);\n  const [gameOver, setGameOver] = useState(null);\n  const rows = gridSize, cols = gridSize;\n\n  const [grid, setGrid] = useState(() => {\n    const g = createEmptyGrid(30, 30);\n    placePreset(g, \"random\", 30, 30);\n    return g;\n  });\n\n  const canvasRef = useRef(null);\n  const speedRef = useRef(speed);\n  const drawingRef = useRef(false);\n  const drawModeRef = useRef(1);\n  const peakCellsRef = useRef(0);\n  const startCellsRef = useRef(0);\n  const prevGridRef = useRef(null);\n  speedRef.current = speed;\n\n  useEffect(() => {\n    const live = countLiveCells(grid);\n    if (live > peakCellsRef.current) peakCellsRef.current = live;\n  }, [grid]);\n\n  // Draw canvas\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    const ctx = canvas.getContext(\"2d\");\n    const w = cols * CELL_SIZE, h = rows * CELL_SIZE;\n    canvas.width = w; canvas.height = h;\n    ctx.fillStyle = \"#0d0f11\"; ctx.fillRect(0, 0, w, h);\n    ctx.strokeStyle = \"rgba(127,161,232,0.06)\"; ctx.lineWidth = 0.5;\n    for (let r = 0; r <= rows; r++) { ctx.beginPath(); ctx.moveTo(0, r*CELL_SIZE); ctx.lineTo(w, r*CELL_SIZE); ctx.stroke(); }\n    for (let c = 0; c <= cols; c++) { ctx.beginPath(); ctx.moveTo(c*CELL_SIZE, 0); ctx.lineTo(c*CELL_SIZE, h); ctx.stroke(); }\n    ctx.shadowColor = \"#7fa1e8\";\n    for (let r = 0; r < rows; r++)\n      for (let c = 0; c < cols; c++)\n        if (grid[r][c]) {\n          ctx.fillStyle = \"#7fa1e8\"; ctx.shadowBlur = 3;\n          ctx.fillRect(c*CELL_SIZE+1, r*CELL_SIZE+1, CELL_SIZE-2, CELL_SIZE-2);\n        }\n    ctx.shadowBlur = 0;\n  }, [grid, rows, cols]);\n\n  // Simulation with end detection\n  useEffect(() => {\n    if (!running) return;\n    const id = setInterval(() => {\n      setGrid(g => {\n        const next = nextGeneration(g, rows, cols);\n        const live = countLiveCells(next);\n        const endGame = (reason) => {\n          setRunning(false);\n          setGameOver({ reason, generations: generation + 1, peakCells: peakCellsRef.current, finalCells: live, startCells: startCellsRef.current });\n        };\n        if (live === 0) { endGame(\"Extinction ‚Äî all cells died\"); return next; }\n        if (gridsEqual(g, next, rows, cols)) { endGame(\"Stasis ‚Äî stable state reached\"); return next; }\n        if (prevGridRef.current && gridsEqual(prevGridRef.current, next, rows, cols)) { endGame(\"Oscillation ‚Äî repeating cycle detected\"); return next; }\n        prevGridRef.current = g;\n        setGeneration(gen => gen + 1);\n        return next;\n      });\n    }, speedRef.current);\n    return () => clearInterval(id);\n  }, [running, speed, rows, cols, generation]);\n\n  // Drawing\n  const getCellFromEvent = useCallback((e) => {\n    const canvas = canvasRef.current;\n    const rect = canvas.getBoundingClientRect();\n    const sx = canvas.width / rect.width, sy = canvas.height / rect.height;\n    const cx = e.touches ? e.touches[0].clientX : e.clientX;\n    const cy = e.touches ? e.touches[0].clientY : e.clientY;\n    const c = Math.floor((cx - rect.left) * sx / CELL_SIZE);\n    const r = Math.floor((cy - rect.top) * sy / CELL_SIZE);\n    if (r >= 0 && r < rows && c >= 0 && c < cols) return { r, c };\n    return null;\n  }, [rows, cols]);\n\n  const toggleCell = useCallback((r, c, mode) => {\n    setGrid(prev => { const copy = prev.map(row => new Uint8Array(row)); copy[r][c] = mode; return copy; });\n  }, []);\n\n  const handlePointerDown = useCallback((e) => {\n    e.preventDefault();\n    const cell = getCellFromEvent(e);\n    if (!cell) return;\n    drawingRef.current = true;\n    drawModeRef.current = grid[cell.r][cell.c] ? 0 : 1;\n    toggleCell(cell.r, cell.c, drawModeRef.current);\n  }, [getCellFromEvent, grid, toggleCell]);\n\n  const handlePointerMove = useCallback((e) => {\n    if (!drawingRef.current) return;\n    e.preventDefault();\n    const cell = getCellFromEvent(e);\n    if (cell) toggleCell(cell.r, cell.c, drawModeRef.current);\n  }, [getCellFromEvent, toggleCell]);\n\n  const handlePointerUp = useCallback(() => { drawingRef.current = false; }, []);\n\n  useEffect(() => {\n    window.addEventListener(\"mouseup\", handlePointerUp);\n    window.addEventListener(\"touchend\", handlePointerUp);\n    return () => { window.removeEventListener(\"mouseup\", handlePointerUp); window.removeEventListener(\"touchend\", handlePointerUp); };\n  }, [handlePointerUp]);\n\n  const resetGame = (newPreset) => {\n    const p = newPreset || preset;\n    setRunning(false); setGeneration(0); setGameOver(null);\n    peakCellsRef.current = 0; prevGridRef.current = null;\n    const g = createEmptyGrid(rows, cols);\n    placePreset(g, p, rows, cols);\n    startCellsRef.current = countLiveCells(g);\n    peakCellsRef.current = startCellsRef.current;\n    setGrid(g);\n  };\n\n  const handleGridSizeChange = (s) => {\n    setGridSize(s); setRunning(false); setGeneration(0); setGameOver(null);\n    peakCellsRef.current = 0; prevGridRef.current = null;\n    const g = createEmptyGrid(s, s);\n    placePreset(g, preset, s, s);\n    startCellsRef.current = countLiveCells(g);\n    peakCellsRef.current = startCellsRef.current;\n    setGrid(g);\n  };\n\n  const handlePresetChange = (p) => { setPreset(p); resetGame(p); };\n\n  const handlePlay = () => {\n    if (!running && !gameOver) {\n      if (generation === 0) startCellsRef.current = countLiveCells(grid);\n      prevGridRef.current = null;\n    }\n    setRunning(!running);\n  };\n\n  const liveCells = countLiveCells(grid);\n\n  return (\n    <Layout>\n      <PageWrapper>\n        <Title>Conway's Game of Life</Title>\n        <Subtitle>\n          Select a seed pattern or draw your own shapes by clicking and dragging.\n          Adjust speed and grid size, then press Play. The game ends when cells stabilize, oscillate, or go extinct.\n        </Subtitle>\n        <Controls>\n          <ControlGroup>\n            <label>Pattern</label>\n            <Select value={preset} onChange={e => handlePresetChange(e.target.value)}>\n              {Object.entries(PRESETS).map(([k, v]) => <option key={k} value={k}>{v.name}</option>)}\n            </Select>\n          </ControlGroup>\n          <ControlGroup>\n            <label>Grid {gridSize}√ó{gridSize}</label>\n            <Slider type=\"range\" min=\"10\" max=\"50\" value={gridSize} onChange={e => handleGridSizeChange(Number(e.target.value))} />\n          </ControlGroup>\n          <ControlGroup>\n            <label>Speed {speed}ms</label>\n            <Slider type=\"range\" min=\"30\" max=\"500\" step=\"10\" value={speed} onChange={e => setSpeed(Number(e.target.value))} />\n          </ControlGroup>\n          <Btn $primary onClick={handlePlay}>{running ? \"‚è∏ Pause\" : \"‚ñ∂ Play\"}</Btn>\n          <Btn onClick={() => resetGame()}>‚Ü∫ Reset</Btn>\n          <Btn onClick={() => {\n            if (gameOver) return;\n            setGrid(g => { const next = nextGeneration(g, rows, cols); setGeneration(n => n+1); return next; });\n          }}>Step ‚Üí</Btn>\n        </Controls>\n        <CanvasWrapper>\n          <canvas\n            ref={canvasRef}\n            onMouseDown={handlePointerDown}\n            onMouseMove={handlePointerMove}\n            onTouchStart={handlePointerDown}\n            onTouchMove={handlePointerMove}\n            style={{ display: \"block\", maxWidth: \"100%\", height: \"auto\", touchAction: \"none\" }}\n          />\n          {gameOver && (\n            <Overlay>\n              <OverlayTitle>üèÅ Game Over</OverlayTitle>\n              <OverlayStat>{gameOver.reason}</OverlayStat>\n              <OverlayStat>Generations played: <span>{gameOver.generations}</span></OverlayStat>\n              <OverlayStat>Starting cells: <span>{gameOver.startCells}</span></OverlayStat>\n              <OverlayStat>Peak live cells: <span>{gameOver.peakCells}</span></OverlayStat>\n              <OverlayStat>Final cells: <span>{gameOver.finalCells}</span></OverlayStat>\n              <OverlayBtn $primary onClick={() => resetGame()}>Play Again</OverlayBtn>\n            </Overlay>\n          )}\n        </CanvasWrapper>\n        <Stats>\n          <div>Generation: <span>{generation}</span></div>\n          <div>Live Cells: <span>{liveCells}</span></div>\n          <div>Grid: <span>{rows}√ó{cols}</span></div>\n        </Stats>\n      </PageWrapper>\n    </Layout>\n  );\n};\n\nexport default GameOfLife;\n"],"names":["CELL_SIZE","PageWrapper","styled","div","withConfig","displayName","componentId","Title","h1","Subtitle","p","Controls","ControlGroup","Select","select","Slider","input","Btn","button","$primary","CanvasWrapper","Stats","Overlay","OverlayTitle","h2","OverlayStat","OverlayBtn","GameOfLife","gridSize","setGridSize","useState","preset","setPreset","speed","setSpeed","running","setRunning","generation","setGeneration","gameOver","setGameOver","rows","cols","grid","setGrid","g","createEmptyGrid","placePreset","canvasRef","useRef","speedRef","drawingRef","drawModeRef","peakCellsRef","startCellsRef","prevGridRef","current","useEffect","live","countLiveCells","canvas","ctx","getContext","w","h","width","height","fillStyle","fillRect","strokeStyle","lineWidth","r","beginPath","moveTo","lineTo","stroke","c","shadowColor","shadowBlur","id","setInterval","next","nextGeneration","endGame","reason","generations","peakCells","finalCells","startCells","gridsEqual","gen","clearInterval","getCellFromEvent","useCallback","e","rect","getBoundingClientRect","sx","sy","cx","touches","clientX","cy","clientY","Math","floor","left","top","toggleCell","mode","prev","copy","map","row","Uint8Array","handlePointerDown","preventDefault","cell","handlePointerMove","handlePointerUp","window","addEventListener","removeEventListener","resetGame","newPreset","liveCells","React","Layout","value","onChange","handlePresetChange","target","Object","entries","PRESETS","_ref","k","v","key","name","type","min","max","s","handleGridSizeChange","Number","step","onClick","handlePlay","n","ref","onMouseDown","onMouseMove","onTouchStart","onTouchMove","style","display","maxWidth","touchAction"],"sourceRoot":""}